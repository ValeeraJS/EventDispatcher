'use strict';var g=this;
function h(){class k{constructor(l=[]){this.filters=[];this.a=new Map;this.all=a=>this.filt(()=>!0,a);this.clear=a=>{this.a.delete(a);return this};this.clearAll=()=>{const a=this.a.keys();for(let b of a)this.a.delete(b);return this};this.dispatch=(a,b)=>{if(!this.b(a))return console.error("EventDispatcher couldn't dispatch the event since EventKeyList doesn't contains key: ",a),this;const c=this.a.get(a)||[];let d=c.length,e;for(let f=0;f<d;f++)e=c[f],e.listener({g:a,target:b,h:--e.times}),0>=e.times&&
(c.splice(f--,1),--d);return this.f(a,b)};this.filt=(a,b)=>{this.filters.push({i:a,listener:b});return this};this.off=(a,b)=>{a=this.a.get(a);if(!a)return this;const c=a.length;for(let d=0;d<c;d++)if(a[d].listener===b){a.splice(d,1);break}return this};this.on=(a,b)=>this.times(a,Infinity,b);this.once=(a,b)=>this.times(a,1,b);this.times=(a,b,c)=>{if(!this.b(a))return console.error("EventDispatcher couldn't add the listener: ",c,"since EventKeyList doesn't contains key: ",a),this;let d=this.a.get(a)||
[];this.a.has(a)||this.a.set(a,d);d.push({listener:c,times:b});return this};this.f=(a,b)=>{for(let c of this.filters)c.i(a,b)&&c.listener({g:a,target:b,h:Infinity});return this};this.b=a=>this.c.length&&!this.c.includes(a)?!1:!0;this.c=l}}return k}"object"===typeof exports&&"undefined"!==typeof module?module.l=h():"function"===typeof define&&define.j?define(h):(g=g||self,g.EventDispatcher=h());
