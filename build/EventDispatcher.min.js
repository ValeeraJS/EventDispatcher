'use strict';var g=this;
function h(){const l=(m=Object,n=[])=>{var k;return k=class extends m{constructor(){super(...arguments);this.c=n;this.filters=[];this.a=new Map;this.all=a=>this.filt(()=>!0,a);this.clearListenersByKey=a=>{this.a.delete(a);return this};this.clearAllListeners=()=>{const a=this.a.keys();for(const b of a)this.a.delete(b);return this};this.dispatchEvent=(a,b)=>{if(!this.b(a))return console.error("EventDispatcher couldn't dispatch the event since EventKeyList doesn't contains key: ",a),this;const c=this.a.get(a)||
[];let d=c.length,e;for(let f=0;f<d;f++)e=c[f],e.listener({g:a,h:--e.times,target:b}),0>=e.times&&(c.splice(f--,1),--d);return this.f(a,b)};this.filt=(a,b)=>{this.filters.push({listener:b,i:a});return this};this.off=(a,b)=>{a=this.a.get(a);if(!a)return this;const c=a.length;for(let d=0;d<c;d++)if(a[d].listener===b){a.splice(d,1);break}return this};this.on=(a,b)=>this.times(a,Infinity,b);this.once=(a,b)=>this.times(a,1,b);this.times=(a,b,c)=>{if(!this.b(a))return console.error("EventDispatcher couldn't add the listener: ",
c,"since EventKeyList doesn't contains key: ",a),this;const d=this.a.get(a)||[];this.a.has(a)||this.a.set(a,d);d.push({listener:c,times:b});return this};this.f=(a,b)=>{for(const c of this.filters)c.i(a,b)&&c.listener({g:a,h:Infinity,target:b});return this};this.b=a=>this.c.length?this.c.includes(a):!0}},k.l=l,k};return l(Object)}
"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.j?define(h):(g="undefined"!==typeof globalThis?globalThis:g||self,g.EventDispatcher=h());
