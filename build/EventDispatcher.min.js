'use strict';var g=this;
function h(){return((l=Object,m=[])=>{var k;return k=class extends l{constructor(){super(...arguments);this.i=m;this.filters=[];this.g=new Map;this.all=a=>this.filt(()=>!0,a);this.clearListenersByKey=a=>{this.g.delete(a);return this};this.clearAllListeners=()=>{const a=this.g.keys();for(const b of a)this.g.delete(b);return this};this.filt=(a,b)=>{this.filters.push({listener:b,o:a});return this};this.fire=(a,b)=>{if(!this.h(a))return console.error("EventDispatcher couldn't dispatch the event since EventKeyList doesn't contains key: ",a),
this;const c=this.g.get(a)||[];let d=c.length,e;for(let f=0;f<d;f++)e=c[f],e.listener({l:a,m:--e.times,target:b}),0>=e.times&&(c.splice(f--,1),--d);return this.j(a,b)};this.off=(a,b)=>{a=this.g.get(a);if(!a)return this;const c=a.length;for(let d=0;d<c;d++)if(a[d].listener===b){a.splice(d,1);break}return this};this.on=(a,b)=>this.times(a,Infinity,b);this.once=(a,b)=>this.times(a,1,b);this.times=(a,b,c)=>{if(!this.h(a))return console.error("EventDispatcher couldn't add the listener: ",c,"since EventKeyList doesn't contains key: ",
a),this;const d=this.g.get(a)||[];this.g.has(a)||this.g.set(a,d);d.push({listener:c,times:b});return this};this.j=(a,b)=>{for(const c of this.filters)c.o(a,b)&&c.listener({l:a,m:Infinity,target:b});return this};this.h=a=>this.i.length?this.i.includes(a):!0}},k})(Object)}"object"===typeof exports&&"undefined"!==typeof module?module.exports=h():"function"===typeof define&&define.s?define(h):(g="undefined"!==typeof globalThis?globalThis:g||self,g.EventDispatcher=h());
