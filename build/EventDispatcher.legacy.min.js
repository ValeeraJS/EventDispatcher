/*
 *****************************************************************************
 Copyright (c) Microsoft Corporation. All rights reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use
 this file except in compliance with the License. You may obtain a copy of the
 License at http://www.apache.org/licenses/LICENSE-2.0

 THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
 WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
 MERCHANTABLITY OR NON-INFRINGEMENT.

 See the Apache Version 2.0 License for specific language governing permissions
 and limitations under the License.
*****************************************************************************/
var h=this;
function k(){function m(b){var a="function"===typeof Symbol&&b[Symbol.iterator],c=0;return a?a.call(b):{next:function(){b&&c>=b.length&&(b=void 0);return{value:b&&b[c++],done:!b}}}}return function(){return function(){var b=this;this.c=[];this.a=new Map;this.all=function(a){return b.flit(function(){return!0},a)};this.clear=function(a){b.a.delete(a);return b};this.dispatch=function(a,c){for(var e=b.a.get(a)||[],d=e.length,f,g=0;g<d;g++)f=e[g],f.listener({g:a,target:c,h:--f.b}),0>=f.b&&(e.splice(g--,1),
--d);return b.f(a,c)};this.flit=function(a,c){b.c.push({i:a,listener:c});return b};this.off=function(a,c){a=b.a.get(a);if(!a)return b;for(var e=a.length,d=0;d<e;d++)if(a[d].listener===c){a.splice(d,1);break}return b};this.on=function(a,c){return b.b(a,Infinity,c)};this.once=function(a,c){return b.b(a,1,c)};this.b=function(a,c,e){var d=b.a.get(a)||[];b.a.has(a)||b.a.set(a,d);d.push({listener:e,b:c});return b};this.f=function(a,c){var e;try{for(var d=m(b.c),f=d.next();!f.done;f=d.next()){var g=f.value;
g.i(a,c)&&g.listener({g:a,target:c,h:Infinity})}}catch(n){var l={error:n}}finally{try{f&&!f.done&&(e=d.return)&&e.call(d)}finally{if(l)throw l.error;}}return b}}}()}"object"===typeof exports&&"undefined"!==typeof module?module.l=k():"function"===typeof define&&define.j?define(k):(h=h||self,h.EventDispatcher=k());
