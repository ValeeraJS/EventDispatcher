/*
 *****************************************************************************
 Copyright (c) Microsoft Corporation. All rights reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use
 this file except in compliance with the License. You may obtain a copy of the
 License at http://www.apache.org/licenses/LICENSE-2.0

 THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
 WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
 MERCHANTABLITY OR NON-INFRINGEMENT.

 See the Apache Version 2.0 License for specific language governing permissions
 and limitations under the License.
*****************************************************************************/
var k=this;
function l(){function m(g){var b="function"===typeof Symbol&&g[Symbol.iterator],a=0;return b?b.call(g):{next:function(){g&&a>=g.length&&(g=void 0);return{value:g&&g[a++],done:!g}}}}return function(){return function(g){var b=this;void 0===g&&(g=[]);this.filters=[];this.a=new Map;this.all=function(a){return b.filt(function(){return!0},a)};this.clear=function(a){b.a.delete(a);return b};this.clearAll=function(){var a,d=b.a.keys();try{for(var e=m(d),c=e.next();!c.done;c=e.next())b.a.delete(c.value)}catch(h){var f={error:h}}finally{try{c&&
!c.done&&(a=e.return)&&a.call(e)}finally{if(f)throw f.error;}}return b};this.dispatch=function(a,d){if(!b.b(a))return console.error("EventDispatcher couldn't dispatch the event since EventKeyList doesn't contains key: ",a),b;for(var e=b.a.get(a)||[],c=e.length,f,h=0;h<c;h++)f=e[h],f.listener({g:a,target:d,h:--f.times}),0>=f.times&&(e.splice(h--,1),--c);return b.f(a,d)};this.filt=function(a,d){b.filters.push({i:a,listener:d});return b};this.off=function(a,d){a=b.a.get(a);if(!a)return b;for(var e=a.length,
c=0;c<e;c++)if(a[c].listener===d){a.splice(c,1);break}return b};this.on=function(a,d){return b.times(a,Infinity,d)};this.once=function(a,d){return b.times(a,1,d)};this.times=function(a,d,e){if(!b.b(a))return console.error("EventDispatcher couldn't add the listener: ",e,"since EventKeyList doesn't contains key: ",a),b;var c=b.a.get(a)||[];b.a.has(a)||b.a.set(a,c);c.push({listener:e,times:d});return b};this.f=function(a,d){var e;try{for(var c=m(b.filters),f=c.next();!f.done;f=c.next()){var h=f.value;
h.i(a,d)&&h.listener({g:a,target:d,h:Infinity})}}catch(p){var n={error:p}}finally{try{f&&!f.done&&(e=c.return)&&e.call(c)}finally{if(n)throw n.error;}}return b};this.b=function(a){return b.c.length&&!b.c.includes(a)?!1:!0};this.c=g}}()}"object"===typeof exports&&"undefined"!==typeof module?module.l=l():"function"===typeof define&&define.j?define(l):(k=k||self,k.EventDispatcher=l());
