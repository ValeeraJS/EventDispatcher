/*
 *****************************************************************************
 Copyright (c) Microsoft Corporation. All rights reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use
 this file except in compliance with the License. You may obtain a copy of the
 License at http://www.apache.org/licenses/LICENSE-2.0

 THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
 WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
 MERCHANTABLITY OR NON-INFRINGEMENT.

 See the Apache Version 2.0 License for specific language governing permissions
 and limitations under the License.
*****************************************************************************/
var k=this;
function l(){function n(e){var b="function"===typeof Symbol&&e[Symbol.iterator],a=0;return b?b.call(e):{next:function(){e&&a>=e.length&&(e=void 0);return{value:e&&e[a++],done:!e}}}}return function(){return function(e){var b=this;void 0===e&&(e=[]);this.filters=[];this.a=new Map;this.all=function(a){return b.filt(function(){return!0},a)};this.clear=function(a){b.a.delete(a);return b};this.dispatch=function(a,c){if(!b.c(a))return console.error("EventDispatcher couldn't dispatch the event since EventKeyList doesn't contains key: ",a),
b;for(var f=b.a.get(a)||[],d=f.length,g,h=0;h<d;h++)g=f[h],g.listener({h:a,target:c,i:--g.b}),0>=g.b&&(f.splice(h--,1),--d);return b.g(a,c)};this.filt=function(a,c){b.filters.push({j:a,listener:c});return b};this.off=function(a,c){a=b.a.get(a);if(!a)return b;for(var f=a.length,d=0;d<f;d++)if(a[d].listener===c){a.splice(d,1);break}return b};this.on=function(a,c){return b.b(a,Infinity,c)};this.once=function(a,c){return b.b(a,1,c)};this.b=function(a,c,f){if(!b.c(a))return console.error("EventDispatcher couldn't add the listener: ",
f,"since EventKeyList doesn't contains key: ",a),b;var d=b.a.get(a)||[];b.a.has(a)||b.a.set(a,d);d.push({listener:f,b:c});return b};this.g=function(a,c){var f;try{for(var d=n(b.filters),g=d.next();!g.done;g=d.next()){var h=g.value;h.j(a,c)&&h.listener({h:a,target:c,i:Infinity})}}catch(p){var m={error:p}}finally{try{g&&!g.done&&(f=d.return)&&f.call(d)}finally{if(m)throw m.error;}}return b};this.c=function(a){return b.f.length&&!b.f.includes(a)?!1:!0};this.f=e}}()}
"object"===typeof exports&&"undefined"!==typeof module?module.m=l():"function"===typeof define&&define.l?define(l):(k=k||self,k.EventDispatcher=l());
